

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>xpdAcq documentation &mdash; xpdAcq 0.8.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Quick Start" href="quickstart.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> xpdAcq
          

          
          </a>

          
            
            
              <div class="version">
                0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="xpdusers.html">For XPD Users</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">API Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beamlinestaff.html">For Beamline Staff</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">xpdAcq Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">xpdAcq</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>xpdAcq documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="xpdacq-documentation">
<h1>xpdAcq documentation<a class="headerlink" href="#xpdacq-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>To post questions about anything XPD, including software, and to see archived answers, please join the <a class="reference external" href="https://groups.google.com/forum/#!forum/xpd-users;context-place=overview">XPD-Users Google group</a></p>
<p><code class="docutils literal notranslate"><span class="pre">xpdAcq</span></code> is a Python package that aids data collection at the XPD beamlime. It is built on top of and augments the NSLS-II data acquisition Python
package <a class="reference external" href="http://nsls-ii.github.io/bluesky/">bluesky</a> .</p>
<p>XPD may be operated directly by bluesky, or using xpdAcq.</p>
<p>The goal of the <code class="docutils literal notranslate"><span class="pre">xpdAcq</span></code> package is to simplify your collection and analysis workflow during beamtime,
so that you can focus more on scientific aspects of your experiment. Additionally, <code class="docutils literal notranslate"><span class="pre">xpdAcq</span></code> provides an interface
that needs less Python experience than the current native bluesky interface.</p>
<p>We hope that you find it intuitive, like the most important function to run a scan, <code class="docutils literal notranslate"><span class="pre">xrun</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xrun</span><span class="p">(</span><span class="n">sample</span><span class="o">-</span><span class="n">info</span><span class="p">,</span> <span class="n">scan</span><span class="o">-</span><span class="n">info</span><span class="p">)</span> <span class="c1">#run this Sample with this Scan-Plan</span>
</pre></div>
</div>
<p>To get started, please go to <a class="reference internal" href="quickstart.html#quick-start"><span class="std std-ref">Quick Start</span></a></p>
<p>If you have suggestions for new features in xpdAcq, or want to report a bug or simply ask a question about
the software, please post it as a new thread at <a class="reference external" href="https://groups.google.com/forum/#!forum/xpd-users;context-place=overview">XPD-Users</a></p>
<div class="section" id="xpdacq-change-log">
<h3>xpdAcq Change Log<a class="headerlink" href="#xpdacq-change-log" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="section" id="v0-8-1">
<h1>v0.8.1<a class="headerlink" href="#v0-8-1" title="Permalink to this headline">¶</a></h1>
<p><strong>Added:</strong></p>
<p>Shutter control in <code class="docutils literal notranslate"><span class="pre">tseries</span></code> scan plan. By default, the shutter will only be open before collecting the data and close afterwards for protecting sample. Default behavior can be overridden by passing argument <code class="docutils literal notranslate"><span class="pre">auto_shutter=False</span></code> while creating scan plan. Please use <code class="docutils literal notranslate"><span class="pre">tseries?</span></code> in <code class="docutils literal notranslate"><span class="pre">ipython</span></code> session for full doc.</p>
</div>
<div class="section" id="v0-8-0rc2">
<h1>v0.8.0rc2<a class="headerlink" href="#v0-8-0rc2" title="Permalink to this headline">¶</a></h1>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li>xpdAcq now outsources <code class="docutils literal notranslate"><span class="pre">glbl</span></code> configuration management to xpdConf</li>
<li>Run CI on conda-forge <code class="docutils literal notranslate"><span class="pre">xpdconf</span></code></li>
</ul>
<p><strong>Removed:</strong></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">load_configuration</span></code> (which is now in xpdConf)</li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li>Pull release notes prepend from GitHub</li>
</ul>
</div>
<div class="section" id="v0-8-0rc">
<h1>v0.8.0rc<a class="headerlink" href="#v0-8-0rc" title="Permalink to this headline">¶</a></h1>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li>Use simulation config if all else fails</li>
</ul>
</div>
<div class="section" id="v0-7-2">
<h1>v0.7.2<a class="headerlink" href="#v0-7-2" title="Permalink to this headline">¶</a></h1>
<p><strong>Added:</strong></p>
<ul class="simple">
<li>Changelogs are now displayed in the docs homepage and
as their own page.</li>
<li>xrun now can take a list of scans and run them in order</li>
<li>Preliminary robot functionality, requiring location information</li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li>Moved to configuration file driven <code class="docutils literal notranslate"><span class="pre">xpdacq_conf.py</span></code> for greater flexability</li>
<li>All doc <code class="docutils literal notranslate"><span class="pre">rst</span></code> files are passed through a jinja2 renderer
before being built into docs. This will allow for greater
flexability while writing the docs.</li>
</ul>
<p><strong>Deprecated:</strong></p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">run_mask_builder</span></code> function and relevant metadata injections.</dt>
<dd>Dynamic mask is generated by <code class="docutils literal notranslate"><span class="pre">xpdAn</span></code> per run and mask server-client
relationship will be tracked in analysis pipeline.</dd>
</dl>
</li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li>Error in the docs where sphinx was finding the templates.</li>
</ul>
<p><strong>Added:</strong></p>
<ul class="simple">
<li>Requirements folder</li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li>Release template now uses proper version in license</li>
<li>Travis now uses the requirements folder</li>
</ul>
<p><strong>Deprecated:</strong></p>
<ul class="simple">
<li>Replace most <code class="docutils literal notranslate"><span class="pre">shutil</span></code> functionalities with native Unix commands
called by <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> to have a clear picture on the system response.</li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">--timeout</span></code> option to rsync during <code class="docutils literal notranslate"><span class="pre">_end_beamtime</span></code> to allow
temporally disconnect.</li>
<li>Exclude hidden files from the <code class="docutils literal notranslate"><span class="pre">_end_beamtime</span></code> archival. Those files
are mainly used as configurations by local applications and are less
likely to be reusable even if user requests them.</li>
</ul>
<p><strong>Added:</strong></p>
<p>None</p>
<ul class="simple">
<li>Filter positions are recorded in metadata on each xrun.</li>
<li>Added verification step: Beamline scientists must verify longterm beamline config file at the start of a new beamtime.</li>
<li>Automatically display current filter positions (<code class="docutils literal notranslate"><span class="pre">In</span></code> or <code class="docutils literal notranslate"><span class="pre">Out</span></code>) from for every <code class="docutils literal notranslate"><span class="pre">xrun</span></code>.</li>
</ul>
<p><strong>Changed:</strong></p>
<ul class="simple">
<li>Change the filepath structure in <code class="docutils literal notranslate"><span class="pre">glbl</span></code> to align with the update
at XPD. All <code class="docutils literal notranslate"><span class="pre">xf28id1</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">xf28id2</span></code>, including hostname and
nfs-mount drives.</li>
</ul>
<p><strong>Deprecated:</strong></p>
<ul class="simple">
<li>Remove static mask injection. Mask is now handled by the analysis
pipeline dynamically.</li>
</ul>
<p><strong>Fixed:</strong></p>
<ul class="simple">
<li>Instruction in <code class="docutils literal notranslate"><span class="pre">run_calibration</span></code>. There is a specific print statement
to tell the user to finish the interactive calibration process in the
analysis terminal.</li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">_end_beamtime</span></code>. Details about the fixes are:<ul>
<li>Use rsync while archiving <code class="docutils literal notranslate"><span class="pre">xpdUser</span></code> so that user can see
the progress. (rsync lists files have been transferred)</li>
<li>More sophisticated logic when flushing xpdUser directory.
Now the function will tell the user to close files used by
the current process, instead of throwing an error and failing
the process.</li>
<li>Some cleaning in the logic. Program will remove the remote
archive if user doesn’t confirm to flush the local directory
so that we could potentially avoid having multiple copies at
the remote location.</li>
</ul>
</li>
</ul>
<p>This is a stable release of <code class="docutils literal notranslate"><span class="pre">xpdAcq</span></code> software.</p>
<p>This version is fully documented and extensively tested.</p>
<p>New features introduced to this version:</p>
<ul>
<li><p class="first">Integration with automated data reduction pipeline. Now live visualization and
automated data-saving is supported. For the details about the pipeline, please
refer to <a class="reference external" href="http://xpdacq.github.io/xpdAn/">xpdAn documentation</a>.</p>
</li>
<li><p class="first">Advanced shutter control logic for temperature-ramping scan plan,
<code class="docutils literal notranslate"><span class="pre">Tlist</span></code> and <code class="docutils literal notranslate"><span class="pre">Tramp</span></code>. By default, shutter will remain closed in
between exposures, which prevent detector from burning. This behavior can
be overridden, leaving the fast shutter open for the entire scan.
Please refer to the function docstring by typing <code class="docutils literal notranslate"><span class="pre">Tlist?</span></code> or
<code class="docutils literal notranslate"><span class="pre">Tramp?</span></code> in the <code class="docutils literal notranslate"><span class="pre">collection</span></code> terminal for more details.</p>
</li>
<li><p class="first">Refined metadata logic. We implement <code class="docutils literal notranslate"><span class="pre">client-server</span></code> logic which
would largely enhance the linking between associated scans. For
more details, please refer to <a class="reference internal" href="usb_Running.html#client-server-md"><span class="std std-ref">client/server metadata schema</span></a>.</p>
</li>
<li><p class="first">Now programs takes in user defined folder tag so that it’s easier to
separate data into subfolders with memorable names. Please refer to
<a class="reference internal" href="usb_Running.html#folder-tag"><span class="std std-ref">User defined folder tag</span></a>.</p>
</li>
<li><p class="first">Current version supports following built-in scans:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>single-frame (ct)
time-series (tseries)
temperature-series scans (Tramp)
temperature-list scans (Tlist)
</pre></div>
</div>
<p>Additional built-in scan types will be added in future releases.</p>
</li>
</ul>
<p>This is a stable release of <code class="docutils literal notranslate"><span class="pre">xpdAcq</span></code> software.</p>
<p>Addition to all the features of <code class="docutils literal notranslate"><span class="pre">v0.5.0</span></code>, new features introduced to this version are:</p>
<blockquote>
<div><ul class="simple">
<li>functionality to reload beamtime configuration when reenter into <code class="docutils literal notranslate"><span class="pre">ipython</span></code> session</li>
<li>improved logic of importing metadata from a spreadsheet, information is parsed in a
way that facilitates data driven studies.</li>
<li>new ScanPlan: temperature list scan <code class="docutils literal notranslate"><span class="pre">Tlist</span></code>. User can collect data at desired
temperature points.</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">v0.5.2</span></code> supports following built-in scans:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>single-frame (ct)
time-series (tseries)
temperature-series scans (Tramp)
temperature-list scans (Tlist)
</pre></div>
</div>
<p>Additional built-in scan types will be added in future releases.</p>
<p><code class="docutils literal notranslate"><span class="pre">v0.5.2</span></code> also supports following automated logics :</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="usb_Running.html#auto-dark"><span class="std std-ref">automated dark subtraction</span></a></li>
<li><a class="reference internal" href="usb_Running.html#auto-calib"><span class="std std-ref">automated calibration capture</span></a></li>
<li><a class="reference internal" href="usb_Running.html#auto-mask"><span class="std std-ref">automated mask per image</span></a></li>
</ul>
</div></blockquote>
<p>This version is fully documented and extensively tested.</p>
<p>This is a stable release of <code class="docutils literal notranslate"><span class="pre">xpdAcq</span></code> software.</p>
<p>New features introduced to this version:</p>
<blockquote>
<div><ul class="simple">
<li>flexibility of running customized <code class="docutils literal notranslate"><span class="pre">bluesky</span></code> plans while keeping <code class="docutils literal notranslate"><span class="pre">xpdAcq</span></code> dark collection logic.</li>
<li>ability of importing metadata from a spreadsheet, open the door for data driven studies.</li>
<li>data reduction tools:<ul>
<li>azimuthal integration using <code class="docutils literal notranslate"><span class="pre">pyFAI</span></code> as the back-end</li>
<li>auto-masking based on statistics on pixel counts</li>
</ul>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">v0.5.0</span></code> supports three kinds of built-in scans:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>single-frame (ct)
time-series (tseries)
temperature-series scans (Tramp)
</pre></div>
</div>
<p>Additional built-in scan types will be added in future releases.</p>
<p><code class="docutils literal notranslate"><span class="pre">v0.5.0</span></code> supports following automated logics :</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="usb_Running.html#auto-dark"><span class="std std-ref">automated dark subtraction</span></a></li>
<li><a class="reference internal" href="usb_Running.html#auto-calib"><span class="std std-ref">automated calibration capture</span></a></li>
<li><a class="reference internal" href="usb_Running.html#auto-mask"><span class="std std-ref">automated mask per image</span></a></li>
</ul>
</div></blockquote>
<p>This version is fully documented and extensively tested.</p>
<p>This is the first full, stable, release, of xpdAcq software.
It offers functionality to acquire data at XPD but with very limited
tools yet to analyze it.
Future releases will focus more on analysis functionalities.
<code class="docutils literal notranslate"><span class="pre">v0.3.0</span></code> is still a limited functionality release in that it only supports three kinds of scans:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>single-frame (ct)
time-series (tseries)
temperature-series scans (Tramp)
</pre></div>
</div>
<p>Additional scan types will be added in future releases.</p>
<dl class="docutils">
<dt>However, it does support:</dt>
<dd><ul class="first last simple">
<li>automated dark subtraction</li>
<li>automated calibration capture.</li>
</ul>
</dd>
</dl>
<p>This version is fully documented and extensively tested.</p>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="quickstart.html" class="btn btn-neutral float-right" title="Quick Start" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright (c) 2016 trustees of Columbia University in the City of New York.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.8.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>